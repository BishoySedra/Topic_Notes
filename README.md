## Git Architecture

### Key Requirements:

1. **Track Everything**
    - **Solution**: Git makes files and folders into objects to track all changes.
2. **OS Independence**
    - **Solution**: Git stores its repository inside the `.git` folder within the current working directory, making it OS-independent.
3. **Unique ID**
    - **Solution**: Git uses the SHA-1 hash function to generate unique identifiers (40-character hash values) for each object.
    - **Example**:
        ```bash
        echo "hello from git arch" | git hash-object --stdin
        # Output: 6753be79ae6060fd6e7b5649d4b0214fffd733cc
        ```
    - **Note**: The hash generated by `git hash-object` differs from the one produced by the standard `shasum` command because Git prefixes the content with information such as **type**, **size**, and a **null** character before hashing. For instance:
        ```bash
        echo -e "blob 20\\0hello from git arch" | shasum
        # Output: 6753be79ae6060fd6e7b5649d4b0214fffd733cc
        ```
4. **Track History**
    - **Solution**: By using SHA-1 values, Git can track the history of all changes. A new SHA-1 value is generated whenever an object changes, allowing Git to detect and record modifications.
5. **No Content Change**
    - **Solution**: Git ensures content integrity by maintaining the same SHA-1 value for unchanged objects.

### Git Objects:

1. **Blob (File)**
    - Stores file content and metadata.
2. **Tree (Folder)**
    - Stores folder content and metadata.
3. **Commit**
    - Represents a snapshot of the repository at a specific point in time.
4. **Tag**
    - Provides a human-readable reference to a specific commit, often used for versioning.

## File States

### 1. **Untracked**

- The file has been created or modified but not yet added to the staging area.

### 2. **Tracked**

- **Modified**: The file has been altered since the last commit.
- **Unmodified**: The file has not changed since the last commit.

## Viewing the Three Trees in Git

### 1. **Current Working Tree**

- To view the files in the current working directory:
    ```bash
    ls
    ```

### 2. **Staging Area**

- To see the files in the staging area:
    ```bash
    git ls-files
    ```

### 3. **Git Repository**

- To list the objects in the Git repository using a Linux command:
    ```bash
    find .git/objects/ -type f
    ```

## Reading Compressed Object Content in Git

- **Determine the type of the object**:
    ```bash
    git cat-file -t b7aec520dec0a7516c18eb4c68b64ae1eb9b5a5e
    # Output: blob/tree/commit
    ```
    
- **Get the size of the object**:
    ```bash
    git cat-file -s b7aec520dec0a7516c18eb4c68b64ae1eb9b5a5e
    # Output: size in bytes
    ```
    
- **View the content of the object before compression**:
    ```bash
    git cat-file -p b7aec520dec0a7516c18eb4c68b64ae1eb9b5a5e
    # Output: actual content of the object
    ```

## Viewing Differences Between Trees

### 1. **Difference Between Current Working Tree and Index**

- To see the changes made in the working directory that are not yet staged:
    ```bash
    git diff
    ```

### 2. **Difference Between Index and Git Repository**

- To view the differences between the staged changes and the last commit:
    ```bash
    git diff --staged
    ```

### 3. **Changing the Commit Message Editor**

- To change the default editor for writing commit messages:
    ```bash
    git config --global core.editor "nano"  # Replace "nano" with your preferred editor
    ```

## Adding a Tag to the Current Commit

- To add a tag to the current commit with an annotation:
    ```bash
    git tag -a v1.1 -m "Version 1.1 from gitwork"
    ```

## Branching

### 1. **Fast-Forward**

- Occurs when changes are made in another branch but only to existing files. The branch can be moved forward without creating a new commit.

### 2. **ORT (Octopus Recursive Three-way) Merge**

- Used when new files are added without modifying existing files. This method merges multiple branches without conflicts.

### 3. **Conflict Resolution**

- Required when the same file has been edited in multiple branches. Conflicts need to be resolved manually before merging.

## Working with Remotes

### 1. **Fetching and Merging Updates from Remote**

- To fetch updates from the remote repository without merging them into your local repository:
    ```bash
    git fetch origin  # Fetch all updates from the remote
    ```
    
- To merge the fetched updates into your local branch:
    ```bash
    git merge origin  # Merge updates into the local branch after fetching
    ```
    
- Alternatively, to fetch and merge in one step:
    ```bash
    git pull origin  # Fetch and merge updates in a single command
    ```

### 2. **Checking Branch Tracking**

- To verify if local branches are tracking remote branches:
    ```bash
    git branch -vv  # Displays the tracking status of branches
    ```

### 3. **Creating a Remote Branch When Pushing Changes Locally**

- To push changes from a newly created local branch to a remote branch that doesn't exist yet:
    ```bash
    git push -u origin branch_name  # Push and set up tracking for the new branch
    ```

### 4. **Displaying Merged Branches**

- To show which branches have been merged together:
    ```bash
    git branch --merged  # Lists branches that have been merged
    ```

## Difference Between Git and GitHub

- **GitHub**: A hosting service for Git repositories that facilitates the use of distributed version control. It provides a web-based interface for managing and collaborating on Git repositories.
- **Git**: A version control system that tracks changes in files and coordinates work on those files among multiple people.

## Dealing with GitHub

### 1. **Difference Between Downloading and Cloning a GitHub Repository**

- **Downloading**:
    - Downloads the repository's content as a ZIP file, disconnecting it from the Git repository. There is no synchronization between the local copy and the remote repository.
- **Cloning**:
    - Creates a local copy of the repository while maintaining a connection to the remote repository, allowing for synchronization of changes between the local and remote versions.

## Git Revert

**Git revert** is a command used to create a new commit that undoes the changes made in a previous commit. Unlike other methods of undoing changes, Git revert is safe because it doesn't alter the project history.

### Basic Syntax for Reverting the Most Recent Commit:

- To create a new commit that reverses the changes introduced by the most recent commit:
    ```bash
    git revert HEAD
    ```

This command is especially useful when you need to undo a commit that has already been pushed to a shared repository, ensuring the integrity of the project's history while correcting mistakes.

## Git Submodules

To add a branch from another repository as a submodule within a specific folder, use the following command:

```bash
git submodule add -b <branch_name> <repository_url> <folder_name>
```

- Replace `<branch_name>` with the branch name you want to add as a submodule.
- Replace `<repository_url>` with the URL of the repository you want to include as a submodule.
- Replace `<folder_name>` with the name of the folder where the submodule will be placed.

This command integrates the specified branch of an external repository into your project, allowing you to manage the submodule alongside your main project.
